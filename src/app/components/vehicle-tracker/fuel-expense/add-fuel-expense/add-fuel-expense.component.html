<div class="container mt-5 d-flex justify-content-center">
    <div class="w-100" style="max-width: 600px;">
        <!-- Back Button -->
        <button class="btn btn-outline-primary mb-3" (click)="goBack()">⬅ Back</button>

        <!-- Page Title -->
        <h2 class="text-primary text-center">
            <i class="bi bi-fuel-pump"></i> Add Fuel Expense
        </h2>

        <!-- Form Card -->
        <form [formGroup]="fuelExpenseForm" (ngSubmit)="submitExpense()" 
            class="card shadow-lg p-4 mt-4 rounded-4 border border-2 border-primary-subtle">

            <!-- Vehicle Selection -->
            <div class="mb-3">
                <label for="vehicleId" class="form-label fw-bold">🚗 Select Vehicle</label>
                <select formControlName="vehicleId" id="vehicleId" class="form-select border-primary shadow-sm">
                    <option value="" disabled selected>-- Select a vehicle --</option>
                    <option *ngFor="let vehicle of vehicles" [value]="vehicle.vehicleId">
                        {{ vehicle.registrationNumber }} - {{ vehicle.vehicleModel }}
                    </option>
                </select>
                <div *ngIf="fuelExpenseForm.controls['vehicleId'].touched && fuelExpenseForm.controls['vehicleId'].invalid" 
                    class="text-danger mt-1">
                    🚨 Vehicle selection is required.
                </div>
            </div>

            <!-- Date Field -->
            <div class="mb-3">
                <label for="date" class="form-label fw-bold">📅 Date</label>
                <input type="date" id="date" class="form-control border-primary shadow-sm" formControlName="date" />
                <div *ngIf="fuelExpenseForm.controls['date'].touched && fuelExpenseForm.controls['date'].invalid" 
                    class="text-danger mt-1">
                    🚨 Date is required.
                </div>
            </div>

            <!-- Quantity & Rate -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="quantity" class="form-label fw-bold">⛽ Quantity (liters)</label>
                    <input type="number" id="quantity" class="form-control border-primary shadow-sm" 
                        formControlName="quantity" (input)="updateAmount()" />
                    <div *ngIf="fuelExpenseForm.controls['quantity'].touched && fuelExpenseForm.controls['quantity'].invalid" 
                        class="text-danger mt-1">
                        🚨 Quantity must be at least 0.1L.
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="rate" class="form-label fw-bold">💰 Rate (per liter)</label>
                    <input type="number" id="rate" class="form-control border-primary shadow-sm" 
                        formControlName="rate" (input)="updateAmount()" />
                    <div *ngIf="fuelExpenseForm.controls['rate'].touched && fuelExpenseForm.controls['rate'].invalid" 
                        class="text-danger mt-1">
                        🚨 Rate must be at least 1 per liter.
                    </div>
                </div>
            </div>

            <!-- Amount (Auto-Calculated) -->
            <div class="mb-3">
                <label for="amount" class="form-label fw-bold">💵 Total Amount</label>
                <input type="text" id="amount" class="form-control bg-light fw-bold border-0" 
                    formControlName="amount" [disabled]="true" />
            </div>

            <!-- Odometer Reading -->
            <div class="mb-3">
                <label for="odometerReading" class="form-label fw-bold">📏 Odometer Reading</label>
                <input type="number" id="odometerReading" class="form-control border-primary shadow-sm" 
                    formControlName="odometerReading" />
                <div *ngIf="fuelExpenseForm.controls['odometerReading'].touched && fuelExpenseForm.controls['odometerReading'].invalid" 
                    class="text-danger mt-1">
                    🚨 Odometer reading is required.
                </div>
            </div>

            <!-- Location -->
            <div class="mb-3">
                <label for="location" class="form-label fw-bold">📍 Location</label>
                <input type="text" id="location" class="form-control border-primary shadow-sm" 
                    formControlName="location" (input)="trimLocation()" />
                <div *ngIf="fuelExpenseForm.controls['location'].touched && fuelExpenseForm.controls['location'].invalid" 
                    class="text-danger mt-1">
                    🚨 Location is required.
                </div>
            </div>

            <!-- Payment Mode -->
            <div class="mb-3">
                <label for="paymentMode" class="form-label fw-bold">💳 Payment Mode</label>
                <select formControlName="paymentMode" id="paymentMode" class="form-select border-primary shadow-sm">
                    <option value="" disabled selected>-- Select Payment Mode --</option>
                    <option value="Cash">💵 Cash</option>
                    <option value="Card">💳 Card</option>
                    <option value="UPI">📱 UPI</option>
                </select>
                <div *ngIf="fuelExpenseForm.controls['paymentMode'].touched && fuelExpenseForm.controls['paymentMode'].invalid" 
                    class="text-danger mt-1">
                    🚨 Payment mode is required.
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary w-100 submit-btn" 
                [disabled]="fuelExpenseForm.invalid">
                ✅ Save Fuel Expense
            </button>
        </form>
    </div>
</div>
